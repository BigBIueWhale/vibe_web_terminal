# Vibe Terminal tmux configuration

# === MOUSE & SCROLL ===
# Mouse ON: scroll wheel works, drag-select enters copy mode.
# Hold Shift + drag for native browser text selection.
set -g mouse on

# === OSC 52 CLIPBOARD ===
# Sends copied text to the browser clipboard via OSC 52 escape sequence.
# Requires ttyd built with @xterm/addon-clipboard.
set -s set-clipboard on
set -as terminal-features ',xterm-256color:clipboard'
set -g allow-passthrough on

# Scrollback buffer
set -g history-limit 50000

# === COPY MODE ===
set -g mode-keys vi
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel

# Auto-copy to browser clipboard on mouse drag release
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel
bind-key -T copy-mode MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel

# Scroll speed tuning for web terminals (browsers send many wheel events)
bind-key -T copy-mode-vi WheelUpPane send-keys -X -N 2 scroll-up
bind-key -T copy-mode-vi WheelDownPane send-keys -X -N 2 scroll-down
bind-key -T copy-mode WheelUpPane send-keys -X -N 2 scroll-up
bind-key -T copy-mode WheelDownPane send-keys -X -N 2 scroll-down

# Smart scroll: enter copy-mode on scroll up, pass through for mouse-aware apps
bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" \
    "send-keys -M" \
    "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'select-pane -t=; copy-mode -e; send-keys -M'"
bind -n WheelDownPane select-pane -t= \; send-keys -M

# === GENERAL ===
# Start window numbering at 1
set -g base-index 1
setw -g pane-base-index 1

# Reduce escape time for vim
set -sg escape-time 10

# Enable true color support
set -g default-terminal "xterm-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# Automatically renumber windows
set -g renumber-windows on

# === STATUS BAR ===
set -g status-style bg=colour235,fg=colour136
set -g status-left '#[fg=colour39,bold] OPENCODE #[fg=colour245]| '
set -g status-right '#[fg=colour245]%H:%M '
set -g status-left-length 20

setw -g window-status-current-style fg=colour39,bold
setw -g window-status-style fg=colour245

set -g pane-border-style fg=colour238
set -g pane-active-border-style fg=colour39
set -g message-style bg=colour235,fg=colour39
