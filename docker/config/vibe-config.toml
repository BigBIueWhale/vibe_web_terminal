# Vibe CLI configuration for Docker container
# Based on battle-tested config from mistral_vibe_setup
#
# IMPORTANT: Ollama Load Balancer must listen on 172.17.0.1:11434 (docker0)
# so that containers can reach it. Modify main.rs to bind to 172.17.0.1:11434
# instead of 127.0.0.1:11434.

# Trigger Vibe's automatic summarization ("compaction") before we hit the real limit.
# We set it below 104k to leave headroom for:
# - Vibe's system prompt + tool traces
# - the model's in-progress output tokens
auto_compact_threshold = 95000

active_model = "devstral-local"

textual_theme = "atom-one-dark"

[[providers]]
name = "ollama-docker0"
# Point at Ollama Load Balancer on docker0 interface
# Containers reach host at 172.17.0.1 (Docker bridge IP)
api_base = "http://172.17.0.1:11434/v1"
api_key_env_var = "OLLAMA_API_KEY"
api_style = "openai"
backend = "generic"

[[models]]
name = "devstral-vibe"
provider = "ollama-docker0"
alias = "devstral-local"
temperature = 0.2
input_price = 0.0
output_price = 0.0
